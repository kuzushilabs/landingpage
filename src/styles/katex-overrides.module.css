/* KaTeX CSS Module - Improved */
.katexWrapper :global(.katex) {
  color: white;
  font-size: 1.1em;
}

/* Make sure the math display blocks stand out properly */
.katexWrapper :global(.katex-display) {
  margin: 1.5rem 0 !important;
  overflow-x: auto !important;
  overflow-y: hidden !important;
  padding: 0.5rem 0;
}

/* Target all math elements to ensure they appear with the right color */
.katexWrapper :global(.katex .math),
.katexWrapper :global(.katex .mord),
.katexWrapper :global(.katex .mbin),
.katexWrapper :global(.katex .mrel),
.katexWrapper :global(.katex .mopen),
.katexWrapper :global(.katex .mclose),
.katexWrapper :global(.katex .mpunct),
.katexWrapper :global(.katex .minner),
.katexWrapper :global(.katex .mop),
.katexWrapper :global(.katex .mfrac) {
  color: white !important;
}

/* Ensure matrices and similar structures render properly */
.katexWrapper :global(.katex .array-row) {
  margin-bottom: 0.25em;
}

/* Fix for spacing around fraction lines */
.katexWrapper :global(.katex .frac-line) {
  border-color: white !important;
}

/* Make sure the math block doesn't get clipped */
.katexWrapper :global(.katex-display > .katex) {
  display: block;
  text-align: center;
  max-width: 100%;
}

/* Ensure inline math is properly aligned */
.katexWrapper :global(.katex-inline) {
  display: inline-flex;
  align-items: center;
}

/* Handle scrolling for overflow */
.katexWrapper :global(.katex-display::-webkit-scrollbar) {
  height: 3px;
}

.katexWrapper :global(.katex-display::-webkit-scrollbar-thumb) {
  background-color: rgba(255, 255, 255, 0.4);
  border-radius: 4px;
}

/* Reset any Tailwind typography overrides that might affect KaTeX */
.prose .katexWrapper :global(.katex) {
  font-size: inherit !important;
  font-family: KaTeX_Main, 'Times New Roman', serif !important;
}
